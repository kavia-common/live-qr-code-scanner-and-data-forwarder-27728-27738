{"is_source_file": true, "format": "Python", "description": "This script downloads a video from a URL (supporting Dropbox links), extracts the first frame, applies image preprocessing (grayscale, denoising, adaptive threshold), and attempts QR code detection within that frame. It saves artifacts and generates a report with detection results and processing details.", "external_files": ["httpx", "cv2", "numpy", "argparse", "tempfile", "pathlib.Path", "urllib.parse"], "external_methods": ["httpx.stream", "cv2.VideoCapture", "cv2.imwrite", "cv2.cvtColor", "cv2.GaussianBlur", "cv2.adaptiveThreshold", "cv2.QRCodeDetector", "Path.mkdir", "Path.write_text"], "published": ["main"], "classes": [], "methods": [{"name": "str rewrite_dropbox_url(url: str)", "description": "Rewrites Dropbox URL to enable direct download by setting 'dl=1' parameter.", "scope": "", "scopeKind": ""}, {"name": "str download_video(url: str, timeout: float = 60.0)", "description": "Downloads a video from the specified URL and saves it as 'video.mp4' in a temporary directory.", "scope": "", "scopeKind": ""}, {"name": "None ensure_dir(p: Path)", "description": "Ensures the specified directory exists, creating it if necessary.", "scope": "", "scopeKind": ""}, {"name": "int main()", "description": "Main function that orchestrates downloading the video, extracting the first frame, preprocessing, QR detection, saving artifacts, and reporting results.", "scope": "", "scopeKind": ""}], "calls": ["rewrite_dropbox_url", "download_video", "ensure_dir", "cv2.VideoCapture", "cap.read", "cap.release", "cv2.imwrite", "cv2.cvtColor", "cv2.GaussianBlur", "cv2.adaptiveThreshold", "cv2.QRCodeDetector().detectAndDecode", "cv2.polylines", "Path.write_text"], "search-terms": ["extract_first_frame", "QR code detection", "video download", "dropbox URL", "image preprocessing", "first frame analysis", "QRCodeDetector"], "state": 2, "file_id": 17, "knowledge_revision": 73, "git_revision": "", "ctags": [{"_type": "tag", "name": "download_video", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/utils/extract_first_frame_and_qr_scan.py", "pattern": "/^def download_video(url: str, timeout: float = 60.0) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(url: str, timeout: float = 60.0)"}, {"_type": "tag", "name": "ensure_dir", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/utils/extract_first_frame_and_qr_scan.py", "pattern": "/^def ensure_dir(p: Path) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(p: Path)"}, {"_type": "tag", "name": "main", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/utils/extract_first_frame_and_qr_scan.py", "pattern": "/^def main() -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "np", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/utils/extract_first_frame_and_qr_scan.py", "pattern": "/^import numpy as np  # type: ignore$/", "language": "Python", "kind": "namespace", "nameref": "module:numpy"}, {"_type": "tag", "name": "rewrite_dropbox_url", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/utils/extract_first_frame_and_qr_scan.py", "pattern": "/^def rewrite_dropbox_url(url: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(url: str)"}], "hash": "a3f99241e5370d69e323b9772613ffcb", "format-version": 4, "code-base-name": "qr_code_processing_backend", "filename": "utils/extract_first_frame_and_qr_scan.py", "revision_history": [{"73": ""}]}