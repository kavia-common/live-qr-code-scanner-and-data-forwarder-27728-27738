{"is_source_file": true, "format": "Python", "description": "This file defines the main backend module for a QR code processing service built with FastAPI. It includes configurations, background QR code scanner control, endpoints for starting/stopping scans, processing QR codes from manual input, YouTube videos, or direct video URLs, optional dependencies for barcode decoding, and handling video downloading and preprocessing. It acts as the core API for the entire project, integrating multiple decoding backends and providing endpoints for both manual and automated QR code detection.", "external_files": ["cv2", "httpx", "tempfile", "pytube", "dotenv", "fastapi", "fastapi.middleware.cors", "pydantic", "pyzbar.pyzbar", "zxingcpp"], "external_methods": ["cv2.VideoCapture", "cv2.QRCodeDetector", "cv2.cvtColor", "cv2.GaussianBlur", "cv2.adaptiveThreshold", "pyzbar.pyzbar.decode", "zxingcpp.read_barcode", "httpx.Client", "httpx.stream", "httpx.post", "YouTube.download", "load_dotenv"], "published": ["health_check", "websocket_usage_notes", "start_scanner", "stop_scanner", "scanner_status", "process_qr", "process_youtube_video", "process_video_url", "get_config", "update_config"], "classes": [{"name": "ServiceConfig", "description": "Holds runtime configuration for the service, like API endpoints, camera index, scan interval, and duplicate payload filtering."}, {"name": "QRScannerService", "description": "Manages webcam capture and QR detection loop in a background thread, with support for external API communication and webhook forwarding."}], "methods": [{"name": "Optional[str] decode_zxing(image)", "description": "Decodes QR/barcode from an image using ZXing-C++ Python bindings if available.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _detect_qr_from_video_file( path: str, max_frames: int = 1500, frame_stride: int = 5, stop_after_first: bool = True, grayscale: bool = False, adaptive_threshold: bool = False, denoise: bool = False, decoder_backend: str = \"auto\", use_opencv: bool = True, use_pyzbar: bool = True, use_zxing: bool = True, )", "description": "Processes video frames from a file, detects QR codes using available backends with preprocessing options.", "scope": "", "scopeKind": ""}, {"name": "str _rewrite_dropbox_url_if_needed(url: str)", "description": "Converts Dropbox share URLs into direct download links compatible with OpenCV.", "scope": "", "scopeKind": ""}, {"name": "Tuple[str,tempfile.TemporaryDirectory] _download_video_to_temp(url: str)", "description": "Downloads a remote video file to a temporary directory, handling Dropbox URLs specially.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self)", "scope": "QRScannerService", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] _decode_with_opencv(img)", "scope": "_detect_qr_from_video_file", "scopeKind": "function", "description": "unavailable"}, {"name": "Optional[str] _decode_with_pyzbar(img)", "scope": "_detect_qr_from_video_file", "scopeKind": "function", "description": "unavailable"}, {"name": "Optional[str] _decode_with_zxing(img)", "scope": "_detect_qr_from_video_file", "scopeKind": "function", "description": "unavailable"}, {"name": "httpx.Response _forward_to_webhook(client: httpx.Client, external_response: httpx.Response)", "scope": "QRScannerService", "scopeKind": "class", "description": "unavailable"}, {"name": "None _process_payload_safe(self, payload: str)", "scope": "QRScannerService", "scopeKind": "class", "description": "unavailable"}, {"name": "None _run_loop(self, camera_index: int, scan_interval_ms: int)", "scope": "QRScannerService", "scopeKind": "class", "description": "unavailable"}, {"name": "httpx.Response _send_to_external(client: httpx.Client, data: str)", "scope": "QRScannerService", "scopeKind": "class", "description": "unavailable"}, {"name": "ConfigResponse get_config()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,str] health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool is_running(self)", "scope": "QRScannerService", "scopeKind": "class", "description": "unavailable"}, {"name": "ProcessQRResponse process_qr(req: ProcessQRRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ProcessVideoURLResponse process_video_url(req: ProcessVideoURLRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ProcessYouTubeResponse process_youtube_video(req: ProcessYouTubeRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] scanner_status()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None start(self, camera_index: int, scan_interval_ms: int)", "scope": "QRScannerService", "scopeKind": "class", "description": "unavailable"}], "calls": ["cv2.VideoCapture", "cv2.QRCodeDetector.detectAndDecode", "cv2.cvtColor", "cv2.GaussianBlur", "cv2.adaptiveThreshold", "pyzbar.pyzbar.decode", "zxingcpp.read_barcode", "httpx.Client.post", "httpx.stream", "pytube.YouTube.streams", "load_dotenv"], "search-terms": ["FastAPI", "QR code detection", "video processing", "ZXing-cpp", "pyzbar", "opencv", "YouTube", "video URL download", "Webcam scanning", "multilingual QR detection", "backend API", "external API integration"], "state": 2, "file_id": 1, "knowledge_revision": 132, "git_revision": "8cbd904b31a0f1b7d0b54489753cceb15401ddfd", "revision_history": [{"8": "980c9acc7c12260c2c61bb8f3615f3685b7a6276"}, {"10": "980c9acc7c12260c2c61bb8f3615f3685b7a6276"}, {"41": "c840af8fbbbbe69fca16783041ac439cf962dfa8"}, {"42": "c840af8fbbbbe69fca16783041ac439cf962dfa8"}, {"43": "c840af8fbbbbe69fca16783041ac439cf962dfa8"}, {"44": "c840af8fbbbbe69fca16783041ac439cf962dfa8"}, {"47": "af97dc5991edc244fdc1e179aa0db684ee9fd52e"}, {"51": "af97dc5991edc244fdc1e179aa0db684ee9fd52e"}, {"52": "af97dc5991edc244fdc1e179aa0db684ee9fd52e"}, {"53": "af97dc5991edc244fdc1e179aa0db684ee9fd52e"}, {"54": "af97dc5991edc244fdc1e179aa0db684ee9fd52e"}, {"55": "af97dc5991edc244fdc1e179aa0db684ee9fd52e"}, {"56": "af97dc5991edc244fdc1e179aa0db684ee9fd52e"}, {"61": "a0fa795535758a874be0178ccc2d0b5fbbdc6e12"}, {"62": "a0fa795535758a874be0178ccc2d0b5fbbdc6e12"}, {"63": "a0fa795535758a874be0178ccc2d0b5fbbdc6e12"}, {"64": "a0fa795535758a874be0178ccc2d0b5fbbdc6e12"}, {"67": "dd276dba5a86c2c2bb8c239fd63ff578a5642131"}, {"68": "909660fe6f03cf06897985334a8dc49328c35400"}, {"76": "909660fe6f03cf06897985334a8dc49328c35400"}, {"77": "909660fe6f03cf06897985334a8dc49328c35400"}, {"78": "909660fe6f03cf06897985334a8dc49328c35400"}, {"79": "909660fe6f03cf06897985334a8dc49328c35400"}, {"80": "909660fe6f03cf06897985334a8dc49328c35400"}, {"84": "909660fe6f03cf06897985334a8dc49328c35400"}, {"85": "4e28b8d2ec216d8eb8b896c11a07d5c483f055e1"}, {"86": "4e28b8d2ec216d8eb8b896c11a07d5c483f055e1"}, {"87": "4e28b8d2ec216d8eb8b896c11a07d5c483f055e1"}, {"88": "4e28b8d2ec216d8eb8b896c11a07d5c483f055e1"}, {"89": "4e28b8d2ec216d8eb8b896c11a07d5c483f055e1"}, {"94": "2095905631f902c525e9bc456a71d516cc7f3488"}, {"95": "2095905631f902c525e9bc456a71d516cc7f3488"}, {"96": "2095905631f902c525e9bc456a71d516cc7f3488"}, {"101": "7ac43e9f25bf128078310a812381fc4893a5c385"}, {"102": "7ac43e9f25bf128078310a812381fc4893a5c385"}, {"103": "7ac43e9f25bf128078310a812381fc4893a5c385"}, {"104": "7ac43e9f25bf128078310a812381fc4893a5c385"}, {"105": "7ac43e9f25bf128078310a812381fc4893a5c385"}, {"112": "91ce4b8ec9cc7981c67a6e66498c75cbe685c35d"}, {"124": "d77c43cf3c8ed2347f26adcc53a32b40ff64b176"}, {"127": "2a31c90755f91085606523a06672f32499764823"}, {"128": "2a31c90755f91085606523a06672f32499764823"}, {"129": "576c4732d42f107541a3bf55bb88966d37e5816d"}, {"132": "8cbd904b31a0f1b7d0b54489753cceb15401ddfd"}], "ctags": [{"_type": "tag", "name": "CONFIG", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^CONFIG: ServiceConfig = ServiceConfig($/", "language": "Python", "typeref": "typename:ServiceConfig", "kind": "variable"}, {"_type": "tag", "name": "ConfigResponse", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ConfigResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DEFAULT_API_KEY", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^DEFAULT_API_KEY = os.getenv(\"EXTERNAL_API_KEY\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DEFAULT_EXTERNAL_API_URL", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^DEFAULT_EXTERNAL_API_URL = os.getenv(\"EXTERNAL_API_URL\", \"https:\\/\\/httpbin.org\\/post\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DEFAULT_WEBHOOK_URL", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^DEFAULT_WEBHOOK_URL = os.getenv(\"WEBHOOK_URL\", \"https:\\/\\/httpbin.org\\/post\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ProcessQRRequest", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ProcessQRRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProcessQRResponse", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ProcessQRResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProcessVideoURLRequest", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ProcessVideoURLRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProcessVideoURLResponse", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ProcessVideoURLResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProcessYouTubeRequest", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ProcessYouTubeRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProcessYouTubeResponse", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ProcessYouTubeResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "QRScannerService", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class QRScannerService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SCANNER", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^SCANNER = QRScannerService()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ServiceConfig", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class ServiceConfig(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StartScanRequest", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class StartScanRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StopScanResponse", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class StopScanResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UpdateConfigRequest", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^class UpdateConfigRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_PYZBAR_AVAILABLE", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    _PYZBAR_AVAILABLE = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_PYZBAR_AVAILABLE", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    _PYZBAR_AVAILABLE = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ZXING_AVAILABLE", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^        _ZXING_AVAILABLE = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ZXING_AVAILABLE", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^        _ZXING_AVAILABLE = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ZXING_AVAILABLE", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    _ZXING_AVAILABLE = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ZXING_AVAILABLE", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^_ZXING_AVAILABLE = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "QRScannerService", "scopeKind": "class"}, {"_type": "tag", "name": "_decode_with_opencv", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def _decode_with_opencv(img) -> Optional[str]:$/", "file": true, "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(img)", "scope": "_detect_qr_from_video_file", "scopeKind": "function"}, {"_type": "tag", "name": "_decode_with_pyzbar", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def _decode_with_pyzbar(img) -> Optional[str]:$/", "file": true, "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(img)", "scope": "_detect_qr_from_video_file", "scopeKind": "function"}, {"_type": "tag", "name": "_decode_with_zxing", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def _decode_with_zxing(img) -> Optional[str]:$/", "file": true, "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(img)", "scope": "_detect_qr_from_video_file", "scopeKind": "function"}, {"_type": "tag", "name": "_detect_qr_from_video_file", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def _detect_qr_from_video_file($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( path: str, max_frames: int = 1500, frame_stride: int = 5, stop_after_first: bool = True, grayscale: bool = False, adaptive_threshold: bool = False, denoise: bool = False, decoder_backend: str = \"auto\", use_opencv: bool = True, use_pyzbar: bool = True, use_zxing: bool = True, )"}, {"_type": "tag", "name": "_download_video_to_temp", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def _download_video_to_temp(url: str) -> Tuple[str, tempfile.TemporaryDirectory]:$/", "language": "Python", "typeref": "typename:Tuple[str,tempfile.TemporaryDirectory]", "kind": "function", "signature": "(url: str)"}, {"_type": "tag", "name": "_forward_to_webhook", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def _forward_to_webhook(client: httpx.Client, external_response: httpx.Response) -> httpx.Re/", "language": "Python", "typeref": "typename:httpx.Response", "kind": "member", "signature": "(client: httpx.Client, external_response: httpx.Response)", "scope": "QRScannerService", "scopeKind": "class"}, {"_type": "tag", "name": "_os", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^import os as _os$/", "language": "Python", "kind": "namespace", "nameref": "module:os"}, {"_type": "tag", "name": "_process_payload_safe", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def _process_payload_safe(self, payload: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, payload: str)", "scope": "QRScannerService", "scopeKind": "class"}, {"_type": "tag", "name": "_rewrite_dropbox_url_if_needed", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def _rewrite_dropbox_url_if_needed(url: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(url: str)"}, {"_type": "tag", "name": "_run_loop", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def _run_loop(self, camera_index: int, scan_interval_ms: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, camera_index: int, scan_interval_ms: int)", "scope": "QRScannerService", "scopeKind": "class"}, {"_type": "tag", "name": "_send_to_external", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def _send_to_external(client: httpx.Client, data: str) -> httpx.Response:$/", "language": "Python", "typeref": "typename:httpx.Response", "kind": "member", "signature": "(client: httpx.Client, data: str)", "scope": "QRScannerService", "scopeKind": "class"}, {"_type": "tag", "name": "_zxingcpp_read_barcode", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^        from zxingcpp import read_barcode as _zxingcpp_read_barcode  # type: ignore$/", "language": "Python", "kind": "unknown", "nameref": "unknown:read_barcode"}, {"_type": "tag", "name": "_zxingcpp_read_barcode", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    from zxingcpp import read_barcode as _zxingcpp_read_barcode  # type: ignore$/", "language": "Python", "kind": "unknown", "nameref": "unknown:read_barcode"}, {"_type": "tag", "name": "adaptive_threshold", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    adaptive_threshold: Optional[bool] = Field($/", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "ProcessVideoURLRequest", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "camera_index", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    camera_index: Optional[int] = Field(default=None, description=\"Override the configured camer/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "StartScanRequest", "scopeKind": "class"}, {"_type": "tag", "name": "camera_index", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    camera_index: Optional[int] = Field(default=None, description=\"Webcam index.\")$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "UpdateConfigRequest", "scopeKind": "class"}, {"_type": "tag", "name": "camera_index", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    camera_index: int = Field(default=0, description=\"Index of the webcam (default 0 for the pri/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ServiceConfig", "scopeKind": "class"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    config: ServiceConfig = Field(..., description=\"Current service configuration.\")$/", "language": "Python", "typeref": "typename:ServiceConfig", "kind": "variable", "scope": "ConfigResponse", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    data: str = Field(..., description=\"Decoded QR code content to process via external API.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ProcessQRRequest", "scopeKind": "class"}, {"_type": "tag", "name": "decode_zxing", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def decode_zxing(image) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(image)"}, {"_type": "tag", "name": "decoder_backend", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    decoder_backend: Optional[Literal[\"opencv\", \"pyzbar\", \"zxing\", \"auto\"]] = Field($/", "language": "Python", "typeref": "typename:Optional[Literal[\"opencv\", \"pyzbar\", \"zxing\", \"auto\"]]", "kind": "variable", "scope": "ProcessVideoURLRequest", "scopeKind": "class"}, {"_type": "tag", "name": "denoise", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    denoise: Optional[bool] = Field($/", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "ProcessVideoURLRequest", "scopeKind": "class"}, {"_type": "tag", "name": "detected", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    detected: List[str] = Field(default_factory=list, description=\"List of unique decoded QR str/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "ProcessVideoURLResponse", "scopeKind": "class"}, {"_type": "tag", "name": "detected", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    detected: List[str] = Field(default_factory=list, description=\"List of unique decoded QR str/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "ProcessYouTubeResponse", "scopeKind": "class"}, {"_type": "tag", "name": "external_api_key", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    external_api_key: Optional[str] = Field(default=None, description=\"API key (if required) for/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ServiceConfig", "scopeKind": "class"}, {"_type": "tag", "name": "external_api_key", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    external_api_key: Optional[str] = Field(default=None, description=\"API key for the external /", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "UpdateConfigRequest", "scopeKind": "class"}, {"_type": "tag", "name": "external_api_url", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    external_api_url: HttpUrl = Field(..., description=\"External API endpoint to send decoded QR/", "language": "Python", "typeref": "typename:HttpUrl", "kind": "variable", "scope": "ServiceConfig", "scopeKind": "class"}, {"_type": "tag", "name": "external_api_url", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    external_api_url: Optional[HttpUrl] = Field(default=None, description=\"External API endpoint/", "language": "Python", "typeref": "typename:Optional[HttpUrl]", "kind": "variable", "scope": "UpdateConfigRequest", "scopeKind": "class"}, {"_type": "tag", "name": "external_response_echo", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    external_response_echo: Optional[Dict[str, Any]] = Field(default=None, description=\"Echo of /", "language": "Python", "typeref": "typename:Optional[Dict[str, Any]]", "kind": "variable", "scope": "ProcessQRResponse", "scopeKind": "class"}, {"_type": "tag", "name": "external_status", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    external_status: Optional[int] = Field(default=None, description=\"HTTP status from external /", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProcessQRResponse", "scopeKind": "class"}, {"_type": "tag", "name": "forwarded_status", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    forwarded_status: Optional[int] = Field(default=None, description=\"HTTP status from webhook /", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProcessQRResponse", "scopeKind": "class"}, {"_type": "tag", "name": "frame_stride", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    frame_stride: Optional[int] = Field($/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProcessYouTubeRequest", "scopeKind": "class"}, {"_type": "tag", "name": "frame_stride", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    frame_stride: Optional[int] = Field(default=5, ge=1, description=\"Analyze every Nth frame to/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProcessVideoURLRequest", "scopeKind": "class"}, {"_type": "tag", "name": "frames_scanned", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    frames_scanned: int = Field(..., description=\"Number of frames scanned.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ProcessVideoURLResponse", "scopeKind": "class"}, {"_type": "tag", "name": "frames_scanned", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    frames_scanned: int = Field(..., description=\"Number of frames scanned.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ProcessYouTubeResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_config", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def get_config() -> ConfigResponse:$/", "language": "Python", "typeref": "typename:ConfigResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "grayscale", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    grayscale: Optional[bool] = Field($/", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "ProcessVideoURLRequest", "scopeKind": "class"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def health_check() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "is_running", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def is_running(self) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self)", "scope": "QRScannerService", "scopeKind": "class"}, {"_type": "tag", "name": "max_frames", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    max_frames: Optional[int] = Field($/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProcessYouTubeRequest", "scopeKind": "class"}, {"_type": "tag", "name": "max_frames", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    max_frames: Optional[int] = Field(default=1500, ge=1, description=\"Maximum number of frames /", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "ProcessVideoURLRequest", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    message: str = Field(..., description=\"Human readable message.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ProcessQRResponse", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    message: str = Field(..., description=\"Summary message.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ProcessVideoURLResponse", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    message: str = Field(..., description=\"Summary message.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ProcessYouTubeResponse", "scopeKind": "class"}, {"_type": "tag", "name": "process_qr", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def process_qr(req: ProcessQRRequest) -> ProcessQRResponse:$/", "language": "Python", "typeref": "typename:ProcessQRResponse", "kind": "function", "signature": "(req: ProcessQRRequest)"}, {"_type": "tag", "name": "process_video_url", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def process_video_url(req: ProcessVideoURLRequest) -> ProcessVideoURLResponse:$/", "language": "Python", "typeref": "typename:ProcessVideoURLResponse", "kind": "function", "signature": "(req: ProcessVideoURLRequest)"}, {"_type": "tag", "name": "process_youtube_video", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def process_youtube_video(req: ProcessYouTubeRequest) -> ProcessYouTubeResponse:$/", "language": "Python", "typeref": "typename:ProcessYouTubeResponse", "kind": "function", "signature": "(req: ProcessYouTubeRequest)"}, {"_type": "tag", "name": "pyzbar_decode", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    from pyzbar.pyzbar import decode as pyzbar_decode  # type: ignore$/", "language": "Python", "kind": "unknown", "nameref": "unknown:decode"}, {"_type": "tag", "name": "scan_interval_ms", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    scan_interval_ms: Optional[int] = Field(default=None, ge=50, le=5000, description=\"Override /", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "StartScanRequest", "scopeKind": "class"}, {"_type": "tag", "name": "scan_interval_ms", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    scan_interval_ms: Optional[int] = Field(default=None, ge=50, le=5000, description=\"Scan inte/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "UpdateConfigRequest", "scopeKind": "class"}, {"_type": "tag", "name": "scan_interval_ms", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    scan_interval_ms: int = Field(default=250, ge=50, le=5000, description=\"Delay between frame /", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ServiceConfig", "scopeKind": "class"}, {"_type": "tag", "name": "scanner_status", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^def scanner_status() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "send_unique_only", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    send_unique_only: Optional[bool] = Field(default=None, description=\"Avoid resending duplicat/", "language": "Python", "typeref": "typename:Optional[bool]", "kind": "variable", "scope": "UpdateConfigRequest", "scopeKind": "class"}, {"_type": "tag", "name": "send_unique_only", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    send_unique_only: bool = Field(default=True, description=\"If true, do not resend identical Q/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "ServiceConfig", "scopeKind": "class"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/live-qr-code-scanner-and-data-forwarder-27728-27738/qr_code_processing_backend/src/api/main.py", "pattern": "/^    def start(self, camera_index: int, scan_interval_ms: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, camera_index: int, scan_interval_ms: int)", "scope": "QRScannerService", "scopeKind": "class"}], "hash": "ebf9351e6e6410f84f88b155b77730f9", "format-version": 4, "code-base-name": "qr_code_processing_backend", "filename": "qr_code_processing_backend/src/api/main.py", "fields": [{"name": "ServiceConfig CONFIG", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEFAULT_API_KEY = os.getenv(\"EXTERNAL_API_KEY\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEFAULT_EXTERNAL_API_URL = os.getenv(\"EXTERNAL_API_URL\", \"https:\\/\\/httpbin.org\\/post\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DEFAULT_WEBHOOK_URL = os.getenv(\"WEBHOOK_URL\", \"https:\\/\\/httpbin.org\\/post\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SCANNER = QRScannerService()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_PYZBAR_AVAILABLE = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_PYZBAR_AVAILABLE = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_ZXING_AVAILABLE = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_ZXING_AVAILABLE = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[bool] adaptive_threshold", "scope": "ProcessVideoURLRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[int] camera_index", "scope": "StartScanRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int camera_index", "scope": "ServiceConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "ServiceConfig config", "scope": "ConfigResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str data", "scope": "ProcessQRRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Literal[\"opencv\", \"pyzbar\", \"zxing\", \"auto\"]] decoder_backend", "scope": "ProcessVideoURLRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[bool] denoise", "scope": "ProcessVideoURLRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] detected", "scope": "ProcessVideoURLResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] external_api_key", "scope": "ServiceConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "HttpUrl external_api_url", "scope": "ServiceConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[HttpUrl] external_api_url", "scope": "UpdateConfigRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Dict[str, Any]] external_response_echo", "scope": "ProcessQRResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] external_status", "scope": "ProcessQRResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] forwarded_status", "scope": "ProcessQRResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] frame_stride", "scope": "ProcessYouTubeRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int frames_scanned", "scope": "ProcessVideoURLResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[bool] grayscale", "scope": "ProcessVideoURLRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] max_frames", "scope": "ProcessYouTubeRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str message", "scope": "ProcessQRResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] scan_interval_ms", "scope": "StartScanRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int scan_interval_ms", "scope": "ServiceConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[bool] send_unique_only", "scope": "UpdateConfigRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "bool send_unique_only", "scope": "ServiceConfig", "scopeKind": "class", "description": "unavailable"}]}